<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <title>CS 353 Group 22</title>
</head>
<style>
    p.justify {
        text-align: justify; 
        text-justify: inter-word;
    }
    .margin-left {
        margin-left: 20px;
    }
</style>
<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="proposal.html">Project Proposal</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="design.html">Project Design</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled">Final Report</a>
                </li>
            </ul>
            <a class="nav-link text-$cyan-200 alert-link" href="https://github.com/ayberkyasa/biPixel">Github Page</a>
        </div>
    </nav>

    <main role="main" class="container mt-5">
        <div class="row justify-content-between">
            <h2 class="d-flex justify-content-between mt-5">
                <span>Project Design</span>
                <a class="pdf-link" href="docs/Design.pdf"><i class="bi bi-file-earmark-arrow-down-fill"></i></a>
            </h2>
            <hr>
        </div>
        <div class="row">
            <div class="col">
                <h3>1. Revised E-R Diagram</h3>
                <img src="docs/DesignDiagram.png" class="img-fluid">
                <h4>Revised Parts</h4>
                <p class="justify">
                    <ul>
                        <li>Rent relationship is switched to an entity. As a result, rent_movie relationship is created.</li>
                        <li>Forgotten genre attribute is removed from the movie entity.</li>
                        <li>fine_id in fine weak entity is underlined dotted.</li>
                        <li>delete_customer relationship between customer and employee entities is created.</li>
                        <li>add_movie relationship between employee and movie entities is created.</li>
                        <li>Attributes email and password are added to the user entity.</li>
                        <li>withdrawn attribute is added to rent_movie relation.</li>
                    </ul>
                </p>                
                <h3>2. Table Schemas</h3>
                <p>movie(<u>movie_id</u>, title, overall_rating, duration, production year, language_option, subtitle_option, price)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">movie_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">movie_id</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">movie_id → title, overall_rating, duration, production year, language_option, subtitle_option, price</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE  IF NOT EXISTS movie (
    movie_id INT NOT NULL AUTO_INCREMENT,
    title VARCHAR(30) NOT NULL,
    overall_rating FLOAT,
    duration INT NOT NULL,
    production_year CHAR(4) NOT NULL,
    language_option VARCHAR(15) NOT NULL,
    subtitle_option VARCHAR(15),
    price INT NOT NULL,
    PRIMARY KEY(movie_id));</pre></p>
                <br>
                <p>rent(<u>rent_id</u>, rent_date, due_date, last_renew_date, renew_times)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">rent_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">rent_id</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">rent_id → rent_date, due_date, last_renew_date, renew_times</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS rent (
    rent_id INT NOT NULL AUTO_INCREMENT,
    rent_date DATE,
    due_date DATE,
    last_renew_date DATE,
    renew_times INT,
    PRIMARY KEY(rent_id));</pre></p>
                <br>
                <p>user(<u>user_id</u>, first_name, middle_name, last_name, birth_date, email, password)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">user_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">user_id, email</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">user_id → first_name, middle_name, last_name, birth_date, email, password</p>
                <p class="margin-left">email → user_id, first_name, middle_name, last_name, birth_date, password</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS user (
    user_id INT NOT NULL AUTO_INCREMENT,
    first_name VARCHAR(10) NOT NULL,
    middle_name VARCHAR(10),
    last_name VARCHAR(10) NOT NULL,
    birth_date DATE NOT NULL,
    email VARCHAR(25),
    password VARCHAR(20) NOT NULL,
    PRIMARY KEY(user_id));</pre></p>
                <br>
                <p>customer(<u>user_id</u>, status)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">user_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">user_id</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">user_id → status</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE  IF NOT EXISTS customer (
    user_id INT NOT NULL,
    status VARCHAR(10) NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user(user_id));</pre></p>
                <br>
                <p>employee(<u>user_id</u>, salary)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">user_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">user_id</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">user_id → salary</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS employee (
    user_id INT NOT NULL,
    salary INT NOT NULL,
    PRIMARY KEY(user_id),
    FOREIGN KEY(user_id) REFERENCES user(user_id));</pre></p>
                <br>
                <p>actor(<u>actor_id</u>, actor_first_name, actor_middle_name, actor_last_name)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">actor_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">actor_id</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">actor_id → actor_first_name, actor_middle_name, actor_last_name</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS actor (
    actor_id INT NOT NULL AUTO_INCREMENT,
    actor_first_name VARCHAR(10),
    actor_middle_name VARCHAR(10),
    actor_last_name VARCHAR(10) NOT NULL,
    PRIMARY KEY(actor_id));</pre></p>
                <br>
                <p>director(<u>director_id</u>, director_first_name, director_middle_name, director_last_name)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">director_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">director_id</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">director_id → director_first_name, director_middle_name, director_last_name</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS director (
    director_id INT NOT NULL AUTO_INCREMENT,
    director_first_name VARCHAR(10),
    director_middle_name VARCHAR(10),
    director_last_name VARCHAR(10) NOT NULL,
    PRIMARY KEY(director_id));</pre></p>
                <br>
                <p>genre(<u>genre_id</u>, genre_name)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">genre_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">genre_id, genre_name</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">genre_id → genre_name</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS genre (
    genre_id INT NOT NULL AUTO_INCREMENT,
    genre_name VARCHAR(12) NOT NULL,
    PRIMARY KEY(genre_id));</pre></p>
                <br>
                <p>requested_movie(<u>req_movie_id</u>, title, production_year, director)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">req_movie_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">req_movie_id</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">req_movie_id → title, production_year, director</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS requested_movie (
    req_movie_id INT NOT NULL AUTO_INCREMENT,
    title VARCHAR(30) NOT NULL,
    production_year CHAR(4) NOT NULL,
    director VARCHAR(30),
    PRIMARY KEY(req_movie_id));</pre></p>
                <br>
                <p>upcoming_movie(<u>movie_id</u>, upcoming_date)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">movie_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">movie_id</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">movie_id → upcoming_date</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS upcoming_movie (
    movie_id INT NOT NULL,
    upcoming_date DATE NOT NULL,
    PRIMARY KEY(movie_id),
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id));</pre></p>
                <br>
                <p>payment(<u>payment_id</u>, cost, payment_date)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">payment_id</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">payment_id</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">payment_id → cost, payment_date</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE payment (
    payment_id INT NOT NULL AUTO_INCREMENT,
    cost FLOAT,
    payment_date DATE,
    PRIMARY KEY(payment_id));</pre></p>
                <br>
                <p>rent_movie(<u>rent_id</u>, <u>movie_id</u>, <u>user_id</u>, withdrawn)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{rent_id, movie_id, user_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{rent_id, movie_id, user_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">rent_id is FK to rent</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">rent_id, movie_id, user_id → withdrawn</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE rent_movie (
    movie_id INT,
    rent_id INT,
    user_id INT,
    withdrawn BOOLEAN,
    PRIMARY KEY(movie_id, rent_id, user_id),
    FOREIGN KEY (rent_id) REFERENCES rent(rent_id) on UPDATE CASCADE ON DELETE RESTRICT),
    FOREIGN KEY (movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT),
    FOREIGN KEY (user_id) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>act(<u>movie_id</u>, <u>actor_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{movie_id, actor_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{movie_id, actor_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left">actor_id is FK to actor</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS act (
    movie_id INT NOT NULL,
    actor_id INT NOT NULL,
    PRIMARY KEY(movie_id, actor_id),
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(actor_id) REFERENCES actor(actor_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>direct(<u>movie_id</u>, <u>director_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{movie_id, director_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{movie_id, director_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left">director_id is FK to director</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS direct (
    movie_id INT NOT NULL,
    director_id INT NOT NULL,
    PRIMARY KEY(movie_id, director_id),
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(director_id) REFERENCES director(director_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>movie_genre(<u>movie_id</u>, <u>genre_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{movie_id, genre_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{movie_id, genre_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left">genre_id is FK to genre</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS movie_genre (
    movie_id INT NOT NULL,
    genre_id INT NOT NULL,
    PRIMARY KEY(movie_id, genre_id),
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(genre_id) REFERENCES genre(genre_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>rating(<u>user_id</u>, <u>movie_id</u>, rating)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">user_id, movie_id → rating</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS rating (
    user_id INT NOT NULL,
    movie_id INT NOT NULL,
    rating FLOAT NOT NULL,
    PRIMARY KEY(user_id, movie_id),
    FOREIGN KEY(user_id) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>favorite(<u>user_id</u>, <u>movie_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS favorite (
    user_id INT NOT NULL,
    movie_id INT NOT NULL,
    PRIMARY KEY(user_id, movie_id),
    FOREIGN KEY(user_id) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>review(<u>user_id</u>, <u>movie_id</u>, review)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Functional Dependencies:</b></p>
                <p class="margin-left">user_id, movie_id → review</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS review (
    user_id INT NOT NULL,
    movie_id INT NOT NULL,
    review VARCHAR(300) NOT NULL,
    PRIMARY KEY(user_id, movie_id),
    FOREIGN KEY(user_id) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>recommendation(<u>recommender</u>, <u>friend</u>, <u>movie_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{recommender, friend, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{recommender, friend, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">recommender is FK to user</p>
                <p class="margin-left">friend is FK to user</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS recommendation (
    recommender INT NOT NULL,
    friend INT NOT NULL,
    movie_id INT NOT NULL,
    PRIMARY KEY(recommender, friend, movie_id),
    FOREIGN KEY(recommender) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(friend) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>request(<u>user_id</u>, <u>req_movie_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, req_movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, req_movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to customer</p>
                <p class="margin-left">req_movie_id is FK to requested_movie</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS request (
    user_id INT NOT NULL,
    req_movie_id INT NOT NULL,
    PRIMARY KEY(user_id, req_movie_id),
    FOREIGN KEY(user_id) REFERENCES customer(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(req_movie_id) REFERENCES requested_movie(req_movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>reminder(<u>user_id</u>, <u>movie_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to customer</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS reminder (
    user_id INT NOT NULL,
    movie_id INT NOT NULL,
    PRIMARY KEY(user_id, movie_id),
    FOREIGN KEY(user_id) REFERENCES customer(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(movie_id) REFERENCES upcoming_movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>reminder(<u>user_id</u>, <u>movie_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to customer</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS reminder (
    user_id INT NOT NULL,
    movie_id INT NOT NULL,
    PRIMARY KEY(user_id, movie_id),
    FOREIGN KEY(user_id) REFERENCES customer(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(movie_id) REFERENCES upcoming_movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>delete_customer(<u>employee</u>, <u>customer</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{employee, customer}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{employee, customer}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">employee is FK to employee</p>
                <p class="margin-left">customer is FK to customer</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS delete_customer (
    employee INT NOT NULL,
    customer INT NOT NULL,
    PRIMARY KEY(employee, customer),
    FOREIGN KEY(employee) REFERENCES employee(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY(customer) REFERENCES customer(user_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>rental_payment(<u>payment_id</u>, <u>rent_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{payment_id, rent_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{payment_id, rent_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">payment_id is FK to payment</p>
                <p class="margin-left">rent_id is FK to rent</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE rental_payment (
    payment_id INT,
    rent_id INT,
    PRIMARY KEY(payment_id, rent_id),
    FOREIGN KEY (rent_id) REFERENCES rent(rent_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (payment_id) REFERENCES payment(payment_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>friends(<u>request_reciever</u>, <u>request_sender</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{request_reciever, request_sender}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{request_reciever, request_sender}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">request_reciever is FK to user</p>
                <p class="margin-left">request_sender is FK to user</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE friends (
    request_receiver INT,
    request_sender INT,
    PRIMARY KEY(request_receiver, request_sender),
    FOREIGN KEY (request_receiver) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (request_sender) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>fine(<u>user_id</u>, <u>fine_id</u>, overdue_days, amount)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, fine_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, fine_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to customer</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE IF NOT EXISTS fine (
    user_id INT NOT NULL,
    fine_id INT UNIQUE NOT NULL,
    overdue_days INT NOT NULL,
    amount FLOAT,
    PRIMARY KEY(user_id, fine_id),
    FOREIGN KEY(user_id) REFERENCES customer(user_id));</pre></p>
                <br>
                <p>fine_payment(<u>user_id</u>, <u>payment_id</u>, <u>fine_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, payment_id, fine_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, payment_id, fine_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to fine</p>
                <p class="margin-left">fine_id is FK to fine</p>
                <p class="margin-left">payment_id is FK to payment</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE fine_payment (
    user_id INT,
    payment_id INT,
    fine_id INT,
    PRIMARY KEY(user_id, payment_id, fine_id),
    FOREIGN KEY (user_id) REFERENCES fine(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (fine_id) REFERENCES fine(fine_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (payment_id) REFERENCES payment(payment_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <br>
                <p>add_movie(<u>user_id</u>, <u>movie_id</u>)</p>
                <p class="margin-left"><b>Primary Key:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Candidate Keys:</b></p>
                <p class="margin-left">{user_id, movie_id}</p>
                <p class="margin-left"><b>Foreign Keys:</b></p>
                <p class="margin-left">user_id is FK to user</p>
                <p class="margin-left">movie_id is FK to movie</p>
                <p class="margin-left"><b>Normal Form:</b></p>
                <p class="margin-left">BCNF</p>
                <p class="margin-left"><b>Table Declaration:</b></p>
                <p class="margin-left"><pre class="margin-left">CREATE TABLE add_movie ( 
    user_id INT,
    movie_id INT,
    PRIMARY KEY(user_id, movie_id),
    FOREIGN KEY (user_id) REFERENCES user(user_id) on UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (movie_id) REFERENCES movie(movie_id) on UPDATE CASCADE ON DELETE RESTRICT);</pre></p>
                <h3>3. Scenarios</h3>
                <p class="justify">This part provides UIs and SQL queries of common functionalities that were given in the project functionality document and first topic-specific functionality which is the movie rental.</p>
                <h4>3.1. Login and Register</h4>
                <p class="justify">Login operation will be done on the same page for both the customer and the employee. Moreover, register operation will be done on the same page for both the customer and the employee. Therefore, there are two mock-ups in this section, which set light to the future frontend implementation.</p>
                <h5>3.1.1. UIs</h5>
                <img src="docs/signIn.png" class="img-fluid">
                <img src="docs/signUp.png" class="img-fluid">
                <h5>3.1.2. SQL Queries</h5>
                <h6>a. Login</h6>
                <p class="margin-left"><b>Inputs:</b> @email, @password<br><b>Query:</b><br>
                    <pre class="margin-left">SELECT *
FROM user
WHERE email = @email and password = @password</pre></p>
                <h6>b. Register</h6>
                <p class="margin-left"><b>Inputs:</b> @first_name, @middle_name, @last_name, @birth_date, @email, @password<br><b>Query:</b><br>
                    <pre class="margin-left">INSERT INTO user(first_name, middle_name, last_name, birth_date, email, password)
VALUES(@first_name, @middle_name, @last_name, @birth_date, @email, @password)
                        </pre></p>

                <h4>3.2. Fine Payment</h4>
                <p class="justify">A customer's movie rental period is 1 week and is determined automatically by the system. When withdrawing movies that exceed the due date, a fine is calculated based on the number of days passed from the due date and the customer is asked to pay. The customer cannot withdraw the movie without making fine payment. In the first UI below, the user who clicks the withdraw button corresponding to the movie s/he wants to withdraw will see the payment screen in the second UI. S/he can pay the fine there.</p>
                <h5>3.2.1. UIs</h5>
                <img src="docs/withdraw.png" class="img-fluid">
                <img src="docs/payment.png" class="img-fluid">
                <h5>3.2.2. SQL Queries</h5>
                <h6>a. Search the movie by a criteria such as name, director etc.</h6>
                <p class="margin-left"><b>Inputs:</b> @searchInput<br><b>Query:</b><br>
                    <pre class="margin-left">SELECT title, director_first_name, director_middle_name, director_last_name, genre_name, overall_rating, production_year, price
FROM movie NATURAL JOIN act NATURAL JOIN actor NATURAL JOIN direct NATURAL JOIN director NATURAL JOIN movie_genre NATURAL JOIN genre
WHERE title = @searchInput OR actor_first_name = @searchInput OR actor_middle_name = @searchInput OR actor_last_name = @searchInput
OR director_first_name = @searchInput OR director_middle_name = @searchInput OR director_last_name = @searchInput;                        
                        </pre></p>
                <h6>b. Withdraw the movie</h6>
                <p class="margin-left"><b>Inputs:</b> @rentId (comes from the previous page)<br><b>Query:</b><br>
                    <pre class="margin-left">UPDATE rent_movie
SET withdrawn = true
WHERE rentId = @rentId                                                
                        </pre></p>
                <h6>c. Pay the fine</h6>
                <p class="margin-left"><b>Inputs:</b> @userId (comes from the previous page), @paymentId (comes from the previous page), @fineId (comes from the previous page)<br><b>Query:</b><br>
                    <pre class="margin-left">INSERT INTO fine_payment (user_id, payment_id, fine_id) 
VALUES (@userId,@paymentId, @fineId);
                                                 
                        </pre></p>
                <h4>3.3. Movie Rental</h4>
                <p class="justify">The customer can search the movie by a criteria such as name, director, etc. Moreover, if s/he wants, s/he can apply a category filter to the list of movies. When s/he clicks the details button, s/he can see the pop-up containing the detailed information about the corresponding movie. Moreover, s/he can rent the movie from this pop-up. When s/he clicks the rent button, s/he can see the payment screen.</p>
                <h5>3.3.1. UIs</h5>
                <img src="docs/rent.png" class="img-fluid">
                <img src="docs/payment.png" class="img-fluid">
                <h5>3.3.2. SQL Queries</h5>
                <h6>a. Search the movie by a criteria such as name, director etc.</h6>
                <p class="margin-left"><b>Inputs:</b> @searchInput<br><b>Query:</b><br>
                    <pre class="margin-left">SELECT title, director_first_name, director_middle_name, director_last_name, genre_name, overall_rating, production_year, price
FROM movie NATURAL JOIN act NATURAL JOIN actor NATURAL JOIN direct NATURAL JOIN director NATURAL JOIN movie_genre NATURAL JOIN genre
WHERE title = @searchInput OR actor_first_name = @searchInput OR actor_middle_name = @searchInput OR actor_last_name = @searchInput
OR director_first_name = @searchInput OR director_middle_name = @searchInput OR director_last_name = @searchInput;                        
                        </pre></p>
                <h6>b. Apply filters if necessary</h6>
                <p class="margin-left"><b>Inputs:</b> @genreInput, @ratingInput, @priceInput<br><b>Query:</b><br>
                    <pre class="margin-left">#genre filter
SELECT title, director_first_name, director_middle_name, director_last_name, genre_name, overall_rating, production_year, price
FROM movie NATURAL JOIN direct NATURAL JOIN director NATURAL JOIN movie_genre NATURAL JOIN genre
WHERE genre_name = @genreInput;

#rating filter
SELECT title, director_first_name, director_middle_name, director_last_name, genre_name, overall_rating, production_year, price
FROM movie NATURAL JOIN direct NATURAL JOIN director NATURAL JOIN movie_genre NATURAL JOIN genre
WHERE overall_rating > @ratingInput;

#price filter
SELECT title, director_first_name, director_middle_name, director_last_name, genre_name, overall_rating, production_year, price
FROM movie NATURAL JOIN direct NATURAL JOIN director NATURAL JOIN movie_genre NATURAL JOIN genre
WHERE price < @priceInput;                          
                        </pre></p>
                <h6>c. Select the movie (due date is specified automatically)</h6>
                <p class="margin-left"><b>Inputs:</b> No Input<br><b>Query:</b><br>
                    <pre class="margin-left">INSERT INTO rent (rent_date, due_date, last_renew_date, renew_times)
VALUES (CURRENT_DATE(), DATE_ADD(CURRENT_DATE(), INTERVAL 7 DAY), CURRENT_DATE(), 0);

INSERT INTO rent_movie (movie_id, rent_id, user_id) 
VALUES (@movieId, (SELECT MAX(rent_id) from rent), @userId);                                                  
                        </pre></p>   
                <h6>d. Pay the rent</h6>
                <p class="margin-left"><b>Inputs:</b> @movieId (comes from the previous page), @rentId (comes from the previous page)<br><b>Query:</b><br>
                    <pre class="margin-left">INSERT INTO payment (cost, payment_date) 
VALUES ((SELECT price FROM movie WHERE movie_id = @movieId), CURRENT_DATE());

INSERT INTO rental_payment (payment_id, rent_id)
VALUES ((SELECT MAX(payment_id) FROM payment), @rentId);                                                                         
                        </pre></p>             
            </div>
        </div>
    </main>
</body>
</html>